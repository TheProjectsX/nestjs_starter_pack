generator client {
    provider = "prisma-client-js"
}

// ! [NOTE]: Use this to generate DBML (DataBase Markup Language) - But the plugin is not installed as the plugin has vulnerabilities. Run to install: `npm i prisma-dbml-generator` . Uninstall after using
// generator dbml {
//     provider = "prisma-dbml-generator"
// }

datasource db {
    provider = "mongodb"
    url      = env("DATABASE_URL")
}

model User {
    id String @id @default(auto()) @map("_id") @db.ObjectId

    email    String
    password String

    role   UserRole       @default(USER)
    status ActivityStatus @default(ACTIVE)

    verified Boolean @default(false)
    deleted  Boolean @default(false)

    otp       String?
    otpExpiry DateTime?

    profile Profile?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("users")
}

model Profile {
    id String @id @default(auto()) @map("_id") @db.ObjectId

    userId String @unique @db.ObjectId
    user   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

    avatar      String?
    name        String?
    phone       String?
    description String?

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    @@map("profiles")
}

// ---------------- ENUM ----------------

enum UserRole {
    ADMIN
    USER
}

enum ActivityStatus {
    ACTIVE
    INACTIVE
    SUSPENDED
}
